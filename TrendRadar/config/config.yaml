# ═══════════════════════════════════════════════════════════════
#                    TrendRadar 配置文件 (财经版)
#                      Version: 2.0.0
# ═══════════════════════════════════════════════════════════════


# ===============================================================
# 1. 基础设置
# ===============================================================
app:
  timezone: "Asia/Shanghai"
  show_version_update: true


# ===============================================================
# 2. 数据源 - 热榜平台 (保留大众热榜以捕捉破圈的大财经事件)
# ===============================================================
platforms:
  enabled: true
  sources:
    - id: "weibo"
      name: "微博热搜"                # 往往能捕捉到突发的财经大瓜（如某公司暴雷）
    
    - id: "douyin"
      name: "抖音热榜"                # 捕捉散户情绪和热门财经解说
    
    - id: "zhihu"
      name: "知乎热榜"                # 深度财经讨论和政策解读

    - id: "toutiao"
      name: "今日头条"                # 宏观政策和社会新闻


# ===============================================================
# 3. 数据源 - RSS 订阅 (全面替换为财经源)
# ===============================================================
rss:
  enabled: true

  freshness_filter:
    enabled: true
    max_age_days: 2

  feeds:
    # --- 核心源 1：华尔街见闻 (全球宏观与市场) ---
    - id: "wallstreetcn-global"
      name: "华尔街见闻-全球"
      url: "https://rsshub.app/wallstreetcn/news/global"

    # --- 核心源 2：财新网 (深度财经报道) ---
    - id: "caixin-finance"
      name: "财新网-金融"
      url: "http://corp.caixin.com/rss/"

    # --- 核心源 3：金十数据 (黄金/外汇/快讯) ---
    - id: "jin10-news"
      name: "金十数据"
      url: "https://rsshub.app/jin10/zy"

    # --- 核心源 4：雪球 (股市热点/大V讨论) ---
    - id: "xueqiu-hots"
      name: "雪球热帖"
      url: "https://rsshub.app/xueqiu/hots"

    # --- 辅助源：Yahoo 财经 (港美股/国际视野) ---
    - id: "yahoo-finance-hk"
      name: "Yahoo财经(HK)"
      url: "https://hk.finance.yahoo.com/news/rss"

    # --- 辅助源：36氪 (科技股/一级市场) ---
    - id: "36kr-finance"
      name: "36氪-财经"
      url: "https://rsshub.app/36kr/information/finance"


# ===============================================================
# 4. 报告模式
# ===============================================================
report:
  mode: "daily"
  display_mode: "keyword"
  sort_by_position_first: true
  rank_threshold: 5
  max_news_per_keyword: 0


# ===============================================================
# 5. 推送内容控制
# ===============================================================
display:
  region_order:
    - ai_analysis                     # AI 分析放最前，直接看结论
    - new_items
    - hotlist
    - rss
    - standalone

  regions:
    hotlist: true
    new_items: true
    rss: true                         # 开启 RSS 显示
    standalone: false
    ai_analysis: true

  standalone:
    platforms: []
    rss_feeds: []
    max_items: 20


# ===============================================================
# 6. 推送通知
# ===============================================================
notification:
  enabled: true

  push_window:
    enabled: false
    start: "20:00"
    end: "22:00"
    once_per_day: true

  channels:
    feishu:
      webhook_url: ""                 # 请填写飞书 Webhook

    dingtalk:
      webhook_url: ""

    wework:
      webhook_url: ""
      msg_type: "markdown"

    telegram:
      bot_token: ""
      chat_id: ""

    email:
      from: ""
      password: ""
      to: ""
      smtp_server: ""
      smtp_port: ""

    ntfy:
      server_url: "https://ntfy.sh"
      topic: ""
      token: ""

    bark:
      url: ""

    slack:
      webhook_url: ""

    generic_webhook:
      webhook_url: ""
      payload_template: ""


# ===============================================================
# 7. 存储配置
# ===============================================================
storage:
  backend: "auto"
  formats:
    sqlite: true
    txt: false
    html: true                       # 必须开启 HTML 以供 Bridge 使用

  local:
    data_dir: "output"
    retention_days: 0

  remote:
    retention_days: 0
    endpoint_url: ""
    bucket_name: ""
    access_key_id: ""
    secret_access_key: ""
    region: ""

  pull:
    enabled: false
    days: 7


# ===============================================================
# 8. AI 模型配置
# ===============================================================
ai:
  model: "openai/deepseek-ai/DeepSeek-V3"
  api_key: ""
  api_base: "https://api.deepseek.com/v1"
  timeout: 120
  temperature: 1.0
  max_tokens: 5000
  num_retries: 1
  fallback_models: []


# ===============================================================
# 9. AI 分析功能
# ===============================================================
ai_analysis:
  enabled: true

  analysis_window:
    enabled: false
    start: "12:00"
    end: "21:00"
    once_per_day: false

  language: "Chinese"
  prompt_file: "ai_analysis_prompt.txt"
  mode: "follow_report"
  max_news_for_analysis: 60
  include_rss: true                 # 必须开启，财经新闻主要来自 RSS
  include_rank_timeline: true


# ===============================================================
# 10. AI 翻译功能
# ===============================================================
ai_translation:
  enabled: false
  language: "English"
  prompt_file: "ai_translation_prompt.txt"


# ===============================================================
# 11. 高级设置
# ===============================================================
advanced:
  debug: false
  version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version"
  mcp_version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version_mcp"
  configs_version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version_configs"

  crawler:
    request_interval: 2000
    use_proxy: false
    default_proxy: "http://127.0.0.1:10801"

  rss:
    request_interval: 1000
    timeout: 15
    use_proxy: false
    proxy_url: ""

  weight:
    rank: 0.6
    frequency: 0.3
    hotness: 0.1

  max_accounts_per_channel: 3

  batch_size:
    default: 4000
    dingtalk: 20000
    feishu: 30000
    bark: 4000
    slack: 4000
  batch_send_interval: 3
  feishu_message_separator: "━━━━━━━━━━━━━━━━━━━"
